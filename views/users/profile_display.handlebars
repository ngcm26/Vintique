<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Useer Profile</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/assets/css/users/profile_display.css">
</head>

<body>
    <div class="container mt-4">
        <div class="profile-header d-flex align-items-center mb-4">
            <img src="{{#if profileUser.profile_picture}}{{profileUser.profile_picture}}{{else}}https://ui-avatars.com/api/?name={{profileUser.username}}&background=random{{/if}}"
                class="rounded-circle me-3" alt="Profile picture" style="width: 80px; height: 80px; object-fit: cover;">
            <div>
                <h3 class="mb-0">{{profileUser.first_name}} {{profileUser.last_name}}</h3>
                <p class="text-muted mb-0">@{{profileUser.username}}</p>
            </div>
        </div>

        <ul class="nav nav-tabs" id="profileTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="listings-tab" data-bs-toggle="tab" data-bs-target="#listings"
                    type="button" role="tab" aria-controls="listings" aria-selected="true">
                    Listings
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="reviews-tab" data-bs-toggle="tab" data-bs-target="#reviews" type="button"
                    role="tab" aria-controls="reviews" aria-selected="false">
                    Reviews
                </button>
            </li>
        </ul>
        <div class="tab-content mt-3" id="profileTabsContent">
            <!-- Listings Tab -->
            <div class="tab-pane fade show active" id="listings" role="tabpanel" aria-labelledby="listings-tab">
                {{#if listings.length}}
                <div class="profile-listings-grid">
                    {{#each listings}}
                    <div class="profile-listing-card" onclick="window.location.href='/listing/{{listing_id}}'">
                        <div class="profile-listing-image">
                            <img src="{{image_url}}" alt="{{title}}">
                        </div>
                        <div class="profile-listing-info">
                            <h3 class="profile-listing-title">{{title}}</h3>
                            <p class="profile-listing-price">${{price}}</p>
                            <p class="profile-listing-category">{{category}}</p>
                        </div>
                    </div>
                    {{/each}}
                </div>
                {{else}}
                <p class="text-muted">This user hasn't listed any products yet.</p>
                {{/if}}
            </div>
        </div>

        <!-- Reviews Tab -->
        <div class="tab-pane fade" id="reviews" role="tabpanel" aria-labelledby="reviews-tab">
            {{#if reviews.length}}
            {{#each reviews}}
            <div class="card mb-3">
                <div class="card-body">
                    <h6 class="card-subtitle mb-2 text-muted">{{this.reviewer_name}} said:</h6>
                    <p class="card-text">{{this.review_text}}</p>
                </div>
            </div>
            {{/each}}
            {{else}}
            <p>This user hasn't received any reviews yet.</p>
            {{/if}}
        </div>
    </div>

    </div>
</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>

</script>

</html>