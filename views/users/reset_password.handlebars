<div class="container">
  <div class="reset-password-container mt-5">
    <div class="reset-password-title">Reset Password</div>
    
    {{#if error}}
      <div class="alert alert-danger" role="alert">
        {{error}}
      </div>
    {{/if}}
    
    <div class="reset-password-content">
      {{#if showForm}}
        <p class="reset-password-text">
          Enter your new password below. Make sure it's secure and easy to remember.
        </p>
        
        <form action="/reset-password" method="POST" id="resetPasswordForm">
          <input type="hidden" name="token" value="{{token}}" />
          
          <div class="mb-3">
            <label for="password" class="form-label">New Password</label>
            <input type="password" class="form-control" id="password" name="password" placeholder="Enter your new password" required />
            <div class="password-requirements">
              <small>Password must be at least 6 characters long</small>
            </div>
          </div>
          
          <div class="mb-3">
            <label for="confirmPassword" class="form-label">Confirm New Password</label>
            <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" placeholder="Confirm your new password" required />
          </div>
          
          <button type="submit" class="reset-password-btn">Reset Password</button>
        </form>
        
        <div class="login-link">
          <p>Remember your password? <a href="/login">Login here</a></p>
        </div>
      {{else}}
        <div class="error-actions">
          <p>Please try requesting a new password reset link.</p>
          <a href="/login" class="btn btn-primary">Back to Login</a>
        </div>
      {{/if}}
    </div>
  </div>
</div>

<link rel="stylesheet" href="/assets/css/users/reset_password.css">

<script>
document.getElementById('resetPasswordForm').addEventListener('submit', function(e) {
  const password = document.getElementById('password').value;
  const confirmPassword = document.getElementById('confirmPassword').value;
  
  if (password !== confirmPassword) {
    e.preventDefault();
    alert('Passwords do not match. Please try again.');
    return false;
  }
  
  if (password.length < 6) {
    e.preventDefault();
    alert('Password must be at least 6 characters long.');
    return false;
  }
});

// Add real-time password validation
document.getElementById('password').addEventListener('input', function() {
  const password = this.value;
  const requirements = document.querySelector('.password-requirements');
  
  // Update requirements text
  let requirementsText = 'Password must be at least 6 characters long';
  
  if (password.length < 6) {
    requirementsText += ' ❌';
    requirements.style.color = '#dc3545';
  } else {
    requirementsText += ' ✅';
    requirements.style.color = '#28a745';
  }
  
  requirements.querySelector('small').textContent = requirementsText;
});
</script> 